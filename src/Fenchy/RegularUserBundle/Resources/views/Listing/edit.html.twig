{% extends 'FenchyGalleryBundle::galleryBase.html.twig' %}
{% form_theme form '::noLabelForm.html.twig' %}

{% block stylesheets %}
    {{ parent() }}        
    <link rel="stylesheet" href="{{ asset('plugins/aehlke-tag/css/jquery.tagit.css') }}" type="text/css" />
    <link rel="stylesheet" href="{{ asset('plugins/aehlke-tag/css/tagit.ui-zendesk.css') }}" type="text/css" />
    <link rel="stylesheet" href="{{ asset('plugins/jquery-ui-1.9.1.custom/css/custom-theme/jquery-ui-1.9.1.fenchy.css') }}" type="text/css" />
    <link rel="stylesheet" href="{{ asset('css/app/main-container-v2.css') }}" type="text/css" />
    <link rel="stylesheet" href="{{ asset('css/gallery/punkave/galleryEdit-V2.css') }}" type="text/css" />
    <style>
            .checkbox li {
                margin-left: 7px;
                margin-top: 20px;
                width: 245px;
            }
            .createlistingdetail ul.tagit
            {
                width: 720px !important;
            }
    </style>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    
    <script type="text/javascript" src="{{ asset('js/regular_user/listing/create.js') }}"></script>
    <script type="text/javascript" src="{{ asset('plugins/ko/knockout-2.2.1.debug.js') }}"></script>
    {% include '::gmapsApiAsset.html.twig' %}
    <script type="text/javascript" src="{{ asset('js/ko-extensions/jquery-autocomplete.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/mvvm/landing-page-view-model.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/lib/gapi-autocomplete.js') }}"></script>
    <script type="text/javascript" src="{{ asset('plugins/aehlke-tag/js/tag-it.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/jquery.timepicker.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/jWindowCrop.js') }}"></script>
    
    <script type="text/javascript">

        var landingPageViewModel;

        $(document).ready(function() {

        	$('ul').prop('spellcheck', true);
                $('#fenchy_noticebundle_noticetype_title').attr('autocomplete','off');
                $('#fenchy_noticebundle_noticetype_start_date').attr('autocomplete','off');
                $('#fenchy_noticebundle_noticetype_start_time').attr('autocomplete','off');
                $('#fenchy_noticebundle_noticetype_end_date').attr('autocomplete','off');
                $('#fenchy_noticebundle_noticetype_end_time').attr('autocomplete','off');
                $('#fenchy_noticebundle_noticetype_price').attr('autocomplete','off');
                $('#fenchy_noticebundle_noticetype_pieces').attr('autocomplete','off');
                $('#fenchy_noticebundle_noticetype_spot').attr('autocomplete','off');
                
            $('#fenchy_noticebundle_noticetype_start_date, #fenchy_noticebundle_noticetype_end_date').datepicker({dateFormat: 'dd.mm.yy'});
        
            geocoder = new google.maps.Geocoder();
            var baseSearchViewUri = '{{ path('fenchy_notice_indexv2') }}';            
            
            landingPageViewModel = new LandingPageViewModel(geocoder, baseSearchViewUri);
            
            ko.applyBindings( landingPageViewModel, document.getElementsByTagName('body')[0] );
            
            autocomplete = new GApiAutocomplete(
                document.getElementById('location_gapi'),
                landingPageViewModel );
           
           

            $("#fenchy_noticebundle_noticetype_price").keydown(function(event) {
            	if($('#fenchy_noticebundle_noticetype_free').is(':checked'))
               	{
                   	alert("{{'listing.create.createnote1'|trans}}");
               	}
		        if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || (event.keyCode == 65 && event.ctrlKey === true) || (event.keyCode >= 35 && event.keyCode <= 39)) {
		           	return;
		        } else {
		            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && ((event.keyCode < 96 || event.keyCode > 105) && event.keyCode != 190 )) {
		                event.preventDefault();
		            }
		        }
		    });

            $("#fenchy_noticebundle_noticetype_pieces").keydown(function(event) {
            	if($('#fenchy_noticebundle_noticetype_one_piece').is(':checked'))
              	{
                  	alert("{{'listing.create.createnote2'|trans}}");
              	}
		        if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || (event.keyCode == 65 && event.ctrlKey === true) || (event.keyCode >= 35 && event.keyCode <= 39)) {
		           	return;
		        } else {
		            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
		                event.preventDefault();
		            }
		        }
		    });
            $("#fenchy_noticebundle_noticetype_price").keyup(function() {
               
                        var str = $("#fenchy_noticebundle_noticetype_price").val();
                        var fraction = str.split('.');
                        if(fraction.length>1)
                        {
                            if(fraction[1].length >2)
                            {
                                var frac = fraction[1].substr(0,2);
                              
                                $("#fenchy_noticebundle_noticetype_price").val(fraction[0]+'.'+frac);
                              //  alert('ONLY TWO DIGITs ALLOW AFTER FRACTION');
                            }
                        }
                        
            });	    
            $("#fenchy_noticebundle_noticetype_pieces").keydown(function(event) {
            	if($('#fenchy_noticebundle_noticetype_one_piece').is(':checked'))
              	{
                  	//alert("{{'listing.create.createnote2'|trans}}"); 
              	}
		        if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || (event.keyCode == 65 && event.ctrlKey === true) || (event.keyCode >= 35 && event.keyCode <= 39)) {
		           	return;
		        } else {
		            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
		                event.preventDefault();
		            }
		        }
		    });
		    
            $("#fenchy_noticebundle_noticetype_spot").keydown(function(event) {
            	if($('#fenchy_noticebundle_noticetype_unlimited').is(':checked'))
              	{
                  	alert("{{'listing.create.createnote3'|trans}}"); 
              	}
		        if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || (event.keyCode == 65 && event.ctrlKey === true) || (event.keyCode >= 35 && event.keyCode <= 39)) {
		           	return;
		        } else {
		            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
		                event.preventDefault();
		            }
		        }
		    });
            
                $('#fenchy_noticebundle_noticetype_type_value_7_value_3').click(function()
		   	{
                            if($('#fenchy_noticebundle_noticetype_type_value_7_value_3').is(':checked'))
                            {
                                if($('#fenchy_noticebundle_noticetype_type_value_7_value_0').is(':checked') || $('#fenchy_noticebundle_noticetype_type_value_7_value_1').is(':checked') || $('#fenchy_noticebundle_noticetype_type_value_7_value_2').is(':checked'))
                                {
                                        alert("{{'listing.create.createnote16'|trans}}");
                                        $('#fenchy_noticebundle_noticetype_type_value_7_value_3').prop( "checked", false );
                                }	
                            }
		   	});
                        
                    $('#fenchy_noticebundle_noticetype_type_value_7_value_0').click(function()
		   	{
                            if($('#fenchy_noticebundle_noticetype_type_value_7_value_0').is(':checked'))
                            {
                                if($('#fenchy_noticebundle_noticetype_free').is(':checked') || $('#fenchy_noticebundle_noticetype_type_value_7_value_3').is(':checked'))
                                {
                                        alert("{{'listing.create.createnote15'|trans}}"); 
                                        $('#fenchy_noticebundle_noticetype_type_value_7_value_0').prop( "checked", false );
                                }
                            }
		   	});
                        
                        $('#fenchy_noticebundle_noticetype_type_value_9_value_0').click(function()
		   	{
                            if($('#fenchy_noticebundle_noticetype_type_value_9_value_0').is(':checked'))
                            {
                                if($('#fenchy_noticebundle_noticetype_free').is(':checked') || $('#fenchy_noticebundle_noticetype_type_value_9_value_2').is(':checked'))
                                {
                                        alert("{{'listing.create.createnote14'|trans}}"); 
                                        $('#fenchy_noticebundle_noticetype_type_value_9_value_0').prop( "checked", false );
                                }
                            }
		   	});
                        
		    $('#fenchy_noticebundle_noticetype_type_value_2_value_0').click(function()
		   	{
                            if($('#fenchy_noticebundle_noticetype_type_value_2_value_0').is(':checked'))
                            {
                                if($('#fenchy_noticebundle_noticetype_free').is(':checked') || $('#fenchy_noticebundle_noticetype_type_value_2_value_5').is(':checked'))
                                {
                                        alert("{{'listing.create.createnote8'|trans}}"); 
                                        $('#fenchy_noticebundle_noticetype_type_value_2_value_0').prop( "checked", false );
                                }
                            }
		   	});
                        $('#fenchy_noticebundle_noticetype_type_value_1_value_0').click(function()
		   	{
                            if($('#fenchy_noticebundle_noticetype_type_value_1_value_0').is(':checked'))
                            {
                                if($('#fenchy_noticebundle_noticetype_free').is(':checked') || $('#fenchy_noticebundle_noticetype_type_value_1_value_4').is(':checked'))
                                {
                                        alert("{{'listing.create.createnote9'|trans}}");
                                        $('#fenchy_noticebundle_noticetype_type_value_1_value_0').prop( "checked", false );
                                }	
                            }
		   	});
                        $('#fenchy_noticebundle_noticetype_type_value_1_value_1').click(function()
		   	{
                            if($('#fenchy_noticebundle_noticetype_type_value_1_value_1').is(':checked'))
                            {
                                if($('#fenchy_noticebundle_noticetype_free').is(':checked') || $('#fenchy_noticebundle_noticetype_type_value_1_value_4').is(':checked'))
                                {
                                        alert("{{'listing.create.createnote9'|trans}}");
                                        $('#fenchy_noticebundle_noticetype_type_value_1_value_1').prop( "checked", false );
                                }	
                            }
		   	});
                        $('#fenchy_noticebundle_noticetype_type_value_1_value_5').click(function()
		   	{
			   if($('#fenchy_noticebundle_noticetype_free').is(':checked') || $('#fenchy_noticebundle_noticetype_type_value_1_value_4').is(':checked'))
			   {
				   alert("{{'listing.create.createnote9'|trans}}");
				   $('#fenchy_noticebundle_noticetype_type_value_1_value_5').prop( "checked", false );
			   }	
		   	});
                        $('#fenchy_noticebundle_noticetype_type_value_2_value_5').click(function()
		   	{
                            if($('#fenchy_noticebundle_noticetype_type_value_2_value_5').is(':checked'))
                            {
                                if($('#fenchy_noticebundle_noticetype_type_value_2_value_0').is(':checked') || $('#fenchy_noticebundle_noticetype_type_value_2_value_1').is(':checked'))
                                {
                                        alert("{{'listing.create.createnote12'|trans}}");
                                        $('#fenchy_noticebundle_noticetype_type_value_2_value_5').prop( "checked", false );
                                }	
                            }
		   	});
                        
                        $('#fenchy_noticebundle_noticetype_type_value_9_value_2').click(function()
		   	{
                            if($('#fenchy_noticebundle_noticetype_type_value_9_value_2').is(':checked'))
                            {
                                if($('#fenchy_noticebundle_noticetype_type_value_9_value_0').is(':checked') || $('#fenchy_noticebundle_noticetype_type_value_9_value_1').is(':checked'))
                                {
                                        alert("{{'listing.create.createnote13'|trans}}");
                                        $('#fenchy_noticebundle_noticetype_type_value_9_value_2').prop( "checked", false );
                                }	
                            }
		   	});
                        
            $('#fenchy_noticebundle_noticetype_type_value_5_value_0').prop('checked','checked');
            $('#fenchy_noticebundle_noticetype_type_value_5_value_0').click(function()
            {
            	$('#fenchy_noticebundle_noticetype_type_value_5_value_0').prop('checked','checked');
            });
                        
            $('#fenchy_noticebundle_noticetype_default_setting').click(function()
           	{
                    if($('#fenchy_noticebundle_noticetype_default_setting').is(':checked'))
                    {
                        var payment = '{{ payment }}';
                        if(!payment)
                        {
                                $('#SetPayment').click();
                                $('#fenchy_noticebundle_noticetype_default_setting').prop( "checked", false );
                        }
                    }
            });

            $('#fenchy_noticebundle_noticetype_type_value_2_value_5').click(function()
            {                
            	if($('#fenchy_noticebundle_noticetype_type_value_2_value_5').is(':checked'))
            	{             	
        			$('#fenchy_noticebundle_noticetype_price').attr('readonly','readonly');
        			$('#fenchy_noticebundle_noticetype_price').val('');
            	}
            	else
            	{
            		$('#fenchy_noticebundle_noticetype_price').removeAttr('readonly');
            	}
            });
            
            $('#fenchy_noticebundle_noticetype_type_value_1_value_4').click(function()
            {                
            	if($('#fenchy_noticebundle_noticetype_type_value_1_value_0').is(':checked'))
            	{             	
                    $('#fenchy_noticebundle_noticetype_type_value_1_value_0').prop( "checked", false );
                    alert("{{'listing.create.createnote5'|trans}}"); 
                    //alert('EITHER CHECK SELL IT OR CHECK GIVE IT FOR FREE ');
            	}  
                if($('#fenchy_noticebundle_noticetype_type_value_1_value_5').is(':checked'))
            	{             	
                    $('#fenchy_noticebundle_noticetype_type_value_1_value_5').prop( "checked", false );
                    alert("{{'listing.create.createnote6'|trans}}"); 
            	}  
            });
            

            $('#fenchy_noticebundle_noticetype_free').click(function()
            {   
                if($('#fenchy_noticebundle_noticetype_free').is(':checked'))
               	{ 
                    if($('#fenchy_noticebundle_noticetype_type_value_1_value_0').is(':checked'))
                    {
                        $('#fenchy_noticebundle_noticetype_type_value_1_value_0').prop( "checked", false );
                        alert("{{'listing.create.createnote7'|trans}}"); 
                        //alert('EITHER CHECK SELL IT OR CHECK FREE ');
                    }
                    
                    if($('#fenchy_noticebundle_noticetype_type_value_1_value_5').is(':checked'))
                    {
                        $('#fenchy_noticebundle_noticetype_type_value_1_value_5').prop( "checked", false );
                        alert("{{'listing.create.createnote11'|trans}}");
                    }
                    
                    
                    if($('#fenchy_noticebundle_noticetype_type_value_2_value_0').is(':checked'))
                    {
                        $('#fenchy_noticebundle_noticetype_type_value_2_value_0').prop( "checked", false );
                        //alert("{{'listing.create.createnote4'|trans}}");
                        //alert('EITHER CHECK BUY OR CHECK FREE ');
                    }
                    if($('#fenchy_noticebundle_noticetype_type_value_2_value_1').is(':checked'))
                    {
                        $('#fenchy_noticebundle_noticetype_type_value_2_value_1').prop( "checked", false );
                        alert("{{'listing.create.createnote11'|trans}}");
                    }
                    
                    if($('#fenchy_noticebundle_noticetype_type_value_7_value_0').is(':checked'))
                    {
                        $('#fenchy_noticebundle_noticetype_type_value_7_value_0').prop( "checked", false );
                        alert("{{'listing.create.createnote4'|trans}}");
                    }
                    if($('#fenchy_noticebundle_noticetype_type_value_9_value_0').is(':checked'))
                    {
                        $('#fenchy_noticebundle_noticetype_type_value_9_value_0').prop( "checked", false );
                        alert("{{'listing.create.createnote4'|trans}}");
                    }
                    
                }
              	if($('#fenchy_noticebundle_noticetype_free').is(':checked'))
               	{             	
            		$('#fenchy_noticebundle_noticetype_price').attr('readonly','readonly');
            		$('#fenchy_noticebundle_noticetype_price').val('');
               	}
               	else
               	{
               		$('#fenchy_noticebundle_noticetype_price').removeAttr('readonly');
               	}
	        });

            $('#fenchy_noticebundle_noticetype_one_piece').click(function()
            {                
              	if($('#fenchy_noticebundle_noticetype_one_piece').is(':checked'))
              	{             	
              		$('#fenchy_noticebundle_noticetype_pieces').attr('readonly','readonly');
             		$('#fenchy_noticebundle_noticetype_pieces').val('');
               	}
               	else
               	{
               		$('#fenchy_noticebundle_noticetype_pieces').removeAttr('readonly');
               	}
        	});

            $('#fenchy_noticebundle_noticetype_unlimited').click(function()
            {                
              	if($('#fenchy_noticebundle_noticetype_unlimited').is(':checked'))
              	{             	
              		$('#fenchy_noticebundle_noticetype_spot').attr('readonly','readonly');
               		$('#fenchy_noticebundle_noticetype_spot').val('');
               	}
               	else
              	{
              		$('#fenchy_noticebundle_noticetype_spot').removeAttr('readonly');
              	}
           });

            $('#fenchy_noticebundle_noticetype_location_arrange').click(function()
           	{                
              	if($('#fenchy_noticebundle_noticetype_location_arrange').is(':checked'))
              	{             	
               		$('#location_gapi').attr('readonly','readonly');
               		$('#location_gapi').val('');
               		$.session.remove('Location');
               	}
              	else
               	{
               		$('#location_gapi').removeAttr('readonly');
               	}
            });

            $('input#location_gapi').autocomplete({
            	 source: function (request, response) {
                     // your ajax code
                  },
                        	              	              	 
            	  minLength: 1,
                  change: function (event, ui) {
                	  setTimeout(function(){
                		  var loc = $('#location_gapi').val();
                          $.session.set("Location",loc);        
                      },10);
                	  var loc = $('#location_gapi').val();
                      $.session.set("Location",loc);                        
                  },
                  select: function(event, ui) {
                  },                 
                  
            });
            $('#location_gapi').blur(function()
            {
                var loc = $('#location_gapi').val();
                $.session.set("Location",loc);                
            });
            $('#fenchy_noticebundle_noticetype_date_arrange').click(function()
	      	{               	                            
            	if($('#fenchy_noticebundle_noticetype_date_arrange').is(':checked'))
              	{             	
            		$('#fenchy_noticebundle_noticetype_start_date').attr('readonly','readonly');
               		$('#fenchy_noticebundle_noticetype_start_date').val('');
               		$('#fenchy_noticebundle_noticetype_start_date').datepicker('disable');
               		$('#fenchy_noticebundle_noticetype_end_date').attr('readonly','readonly');
               		$('#fenchy_noticebundle_noticetype_end_date').val('');
               		$('#fenchy_noticebundle_noticetype_end_date').datepicker('disable');
               	}
              	else
              	{
               		$('#fenchy_noticebundle_noticetype_start_date').removeAttr('readonly');
               		$('#fenchy_noticebundle_noticetype_end_date').removeAttr('readonly');
               		$('#fenchy_noticebundle_noticetype_start_date').datepicker('enable');
               		$('#fenchy_noticebundle_noticetype_end_date').datepicker('enable');
               	}            	
            });
            $('#fenchy_noticebundle_noticetype_start_time_arrange').click(function()
            {                
              	if($('#fenchy_noticebundle_noticetype_start_time_arrange').is(':checked'))
               	{             	
               		$('#fenchy_noticebundle_noticetype_start_time').attr('readonly','readonly');
               		$('#fenchy_noticebundle_noticetype_start_time').val('');
               		$('#fenchy_noticebundle_noticetype_start_time').timepicker('disable');
               		$('#fenchy_noticebundle_noticetype_end_time').attr('readonly','readonly');
               		$('#fenchy_noticebundle_noticetype_end_time').val('');
               		$('#fenchy_noticebundle_noticetype_end_time').timepicker('disable');
               	}
               	else
               	{
               		$('#fenchy_noticebundle_noticetype_start_time').removeAttr('readonly');
               		$('#fenchy_noticebundle_noticetype_end_time').removeAttr('readonly');
               		$('#fenchy_noticebundle_noticetype_start_time').timepicker('enable');
               		$('#fenchy_noticebundle_noticetype_end_time').timepicker('enable');
               	}
            });
        });
        
        window.onload=function(){
        $('li.selected:first').siblings().removeClass('selected');    
	$('.crop_me4').jWindowCrop({

                    targetWidth: 970, //Width of facebook cover division
                    targetHeight: 326, //Height of cover division
                    loadingText: '',
                    onChange: function(result) {

                            var strcropX = $(this).css('left');
                            var strcropY = $(this).css('top');
                            strcropX = strcropX.replace(/px/g, '');
                            strcropX = strcropX.replace(/-/g, '');
                            strcropY = strcropY.replace(/px/g, '');
                            strcropY = strcropY.replace(/-/g, '');
                            //alert($(this).parent().parent().parent('li.selected').index());
                            var imageNumber = $('li.selected').index();
                            if(imageNumber==0)
                            {
                            $('#form_cropX0').val(strcropX);
                            $('#form_cropY0').val(strcropY);
                            }
                            if(imageNumber==1)
                            {
                            $('#form_cropX1').val(strcropX);
                            $('#form_cropY1').val(strcropY);
                            }
                            if(imageNumber==2)
                            {
                            $('#form_cropX2').val(strcropX);
                            $('#form_cropY2').val(strcropY);
                            }
                            if(imageNumber==3)
                            {
                            $('#form_cropX3').val(strcropX);
                            $('#form_cropY3').val(strcropY);
                            }
                            /*console.log("separation from left- "+result.cropX);
                            console.log("separation from left- "+result.cropY);
                            console.log("width- "+result.cropW-455);
                            console.log("Height- "+result.cropH-123);*/
                    }
                });
                
            
            
           
            {% set i=0 %}        
            {% for image in notice.gallery.images %}
                {{ image.id }}
                   $('#form_cropX{{ i }}').val({{ image.cropX }});
                   $('#form_cropY{{ i }}').val({{ image.cropY }});
                   
                   $("[id^='{{image.name}}']").find('.crop_me4').css('left',{{ image.cropX }}+'px');
                   $("[id^='{{image.name}}']").find('.crop_me4').css('top',-{{ image.cropY }}+'px');
                   
            {% set i = i+1 %}
            {% endfor %}
	};
    </script>
   
    <script type="text/javascript" src="{{ asset('js/regular_user/listing/form.js') }}"></script>
    
    
       
    
{% endblock %}

{% block content %}
    {{ parent() }}
    <style>
            .thumbnails .thumbnail .crop_me4
            {
                display:none !important;
            }
            .thumbnails .selected .crop_me4
            {
                display:block !important;
            }
            form label
	    {
		    color: #000000;
		    font-family: code_boldregular;
		    font-size: 12px;
		    letter-spacing: 1px;
	    }
	    ul.tagit {
		    margin-left: 175px;
                    margin-top: -3px;
		    border-width: 0px;
		}
		ul.tagit li.tagit-choice {
		    background: none repeat scroll 0 0 #E14F45;
		    font-weight: normal;
		    
		}
		ul.tagit li.tagit-choice .tagit-label:not(a) {
    		color: #FFF;
    		font-family: code_boldregular;
    		font-size: 12px;
    		letter-spacing: 1px;
    		padding: 2px 4px 1px;
		}
		ul.tagit li.tagit-choice:hover, ul.tagit li.tagit-choice.remove {
    		background-color: #E14F45;
    		border-color: #E14F45;
		}
		form textarea
		{
                    width: 900px;
                    height: 130px;
                    line-height: 2;
                    padding: 5px;
		}
		form input[type=text]
		{                   
                    width: 900px;
		}
		#gallery-edit-images-container .empty:first-child .add-center .icon-plus-sign {
		    font-size: 55px;
		    color: #FFFFFF;
		}
		#gallery-edit-images-container .selected .add-center strong {
		    color: #FFFFFF !important;
		    display: none;
		    font-size: 18px !important;
		    text-align: left !important;
		    text-transform: uppercase !important;
		}
		#gallery-edit-images-container .empty .add-center strong {
		    color: #FFFFFF;
		    display: block;
		    font-family: code_boldregular;
		    font-size: 14px;
		    letter-spacing: 1px;
		    margin-left: -29px;
		    text-align: center;
		    text-transform: uppercase;
		}
                .icon-plus-sign:before {
                    content: "";
                    margin-left: -14px;
                    margin-top: 3px;
                }
                .icon-plus-sign:before {
		    text-align: center;
		    width: 100%;
		}
		.info-by-line {		
		    margin-left: -50px;
		}
		#gallery-edit-images-container .thumbnail {
    		background-color: #C0C0C0;
                }	
                #gallery-edit-images-container .thumbnail {    
                        top: -18px;
                }    	
                #gallery-edit-images-container li.selected img.medium-image {
                            display: inline;
                            /*height: 330px;*/
                            width: 100%;
                        }
                .placeholder_listing {
                display: block;
                width: 970px;
                margin: 0 auto;
                position: relative;
                }    
                .placeholder .jwc_frame, .placeholder_listing .jwc_frame
                {
                cursor: move !important;
                }
                ._6_f {
                max-width: 275px;
                display: inline-block;
                }
                ._8_2 {
                font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
                font-size: 24px;
                line-height: 30px;
                font-weight: bold;
                display: inline-block;
                padding-right: 30px;
                }
                ._8_2, .alternate {
                color: #FFF;
                text-rendering: optimizelegibility;
                text-shadow: 0 0 3px rgba(0,0,0,0.8);
                }
                .alternate {
                font-size: 20px;
                font-weight: normal;
                white-space: nowrap;
                color: #fff;
                } 
                .jwc_controls{
                display: block !important;
                margin-left: 421px !important;
                margin-top: 148px !important;
                }
                .jwc_controls .dragger {
                    background: url("{{ asset('images/drag.png') }}") no-repeat scroll 9px 8px rgba(84, 97, 133, 0.4);
                    border-radius: 2px 2px 2px 2px;
                    box-shadow: 0 1px 0 rgba(0, 0, 0, 0.12) inset;
                    color: #FFFFFF;
                    display: inline;
                    font-family: mathletebulky;
                    font-size: 17px;
                    letter-spacing: 1px;
                    padding: 4px 9px 6px 24px;
                }
                .persendata .about-details .name [type="text"], .persendata .about-details .name textarea {
                    border: 1px solid #CCCCCC;
                    margin-left: -9px;
                    padding: 12px;
                }
                .persendata .about-details {
                   border: 0px solid #CCCCCC
                }
                #fenchy_noticebundle_noticetype_configuration input[type=text],#fenchy_noticebundle_noticetype_configuration textarea
		{
		    border: 1px solid #CCCCCC;
		    display: inline-block;
		    margin-bottom: 20px;
		    padding: 1%;
		    width: 97.8%;
		}
		#fenchy_noticebundle_noticetype_configuration select
		{
		    border: 1px solid #CCCCCC;
		    display: inline-block;
		    margin-bottom: 20px;
		    padding: 1%;
		}
		div.flash-message {
		    margin-bottom: -129px;
		    min-height: 36px;
		    padding-top: 20px;
		    position: absolute;
		    z-index: 100;
		}
                #gallery-edit-images-container .thumbnail.selected .caption {
                    font-size: 24px;
                    margin-left: 940px;
                    padding: 6px 10px 0 0;
                    position: absolute;
                    top: 0 !important;
                    z-index: 2;
                }
                #gallery-edit-images-container .thumbnail .caption {
                    font-size: 12px;
                    margin-left: 111px;
                    padding: 1px 5px 0 0;
                    position: absolute;
                    text-align: right;
                    top: 0 !important;
                    z-index: 2;
                }
	</style>	
	
	<a class="createtitle" href="javascript:void(0);" style="float: left; margin-top: -36px;">{{ ('listing.create.2.subtitle_'~type.name)|trans }}</a>
    	<section id="contentinner">        
		<div class="wrapper" style="margin-top: -45px;" >
                    
		<form class="form-wrapper listing-form" action="{{ path('fenchy_regular_user_notice_edit', { id: notice.id }) }}" method="post" {{ form_enctype(form) }}>
	   		{{ block('galleryContainer') }}
                        
                        <input type="hidden" name="cropX0" id="form_cropX0" value="0">
                        <input type="hidden" name="cropY0" id="form_cropY0" value="0">
                        
                        <input type="hidden" name="cropX1" id="form_cropX1" value="0">
                        <input type="hidden" name="cropY1" id="form_cropY1" value="0">
                        
                        <input type="hidden" name="cropX2" id="form_cropX2" value="0">
                        <input type="hidden" name="cropY2" id="form_cropY2" value="0">
                        
                        <input type="hidden" name="cropX3" id="form_cropX3" value="0">
                        <input type="hidden" name="cropY3" id="form_cropY3" value="0">
                        
	   		<div class="clearfix"></div>    		
    		<div class="createlisting" style="margin-top: 5px"> 
	        	<div class="createlistingdata">        	
	        	 	
                            <h4>{{ 'notice.title'|trans|upper }}</h4>
	        		<div class="createlistingdetail">
                                    <p>
		            		{{ form_row(form.title) }}
                                    </p>
                                </div>	            
                        </div>	            	
                        <div class="createlistingdata">
                                    <h4>{{ 'notice.description'|trans|upper }}</h4>
                                <div class="createlistingdetail" style="border: 0px solid #CCCCCC; margin-left: -4px;">
                                    <p>
	            			{{ form_row(form.content) }}
                                    </p>
	            		</div>
	           	</div>
	                <div class="createlistingdata">  
                            <h4>{{ 'notice.tags'|trans|upper }}</h4>
                            <div class="clearfix"></div>
                            <div class="createlistingdetail">                            
                                <p>{{ 'notice.tags1'|trans|upper }}</p>                            
                                {{ form_row(form.tags) }}
                            </div>
                        </div>
	           
	            {% if type.dateAvailable %}
		            <div class="createlistingdata halfleft">
		            	<h4>{{ 'notice.time'|trans|upper }}</h4>
		            	<div class="createlistingdetail date-div">
		            		<div class="left">
	                    		<div class="date">
	                    			<label>{{ 'notice.start'|trans|upper }}</label>
	                    			{{ form_row(form.start_date) }}
	                    			{{ form_row(form.start_time) }}
	                    		</div>
	                    		{% if type != 'offerevents' and type != 'events' %}
		                    		<div class="checkbox">
		                    			{{ form_widget(form.date_arrange) }}
                                                        {{ form_label(form.date_arrange) }}
                                                        {{ form_errors(form.date_arrange) }}
		                    		</div>
	                    		{% endif %}
	                    	</div>
	                    	<div class="left">
	                        	<div class="date">
	                            	<label>{{ 'notice.end'|trans|upper }}</label>
	                            	{{ form_row(form.end_date) }}
	                            	{{ form_row(form.end_time) }}
	                            </div>
	                            {% if type != 'offerevents' and type != 'events' %}
		                            <div class="checkbox">
		                    			{{ form_widget(form.start_time_arrange) }}
                                                        {{ form_label(form.start_time_arrange) }}
                                                        {{ form_errors(form.start_time_arrange) }}
		                    		</div>
	                    		{% endif %}
                                     {% if type== 'events' %}
                                            <div class="checkbox">	                            
                                                    {{ form_widget(form.start_time_arrange) }}
                                                    {{ form_label(form.start_time_arrange) }}
                                                    {{ form_errors(form.start_time_arrange) }}
		                    		</div>
                                        {% endif %}
	                            <!-- <div class="checkbox">
	                            	{# {{ form_row(form.end_date_arrange) }} #}
	                             </div>
	                             <div class="checkbox">
	                            	{# {{ form_row(form.end_time_arrange) }} #}
	                            </div>-->
	                       	</div>
		            	</div>
		            </div>
	           	{% endif %}
	            {% if type.locationChangeAvailable %}
	             	<div class="createlistingdata halfright">
                    	<h4>{{ 'notice.location'|trans }}</h4>
                        <div class="createlistingdetail">
                          	<div class="location">   
                           		<label>{{ 'notice.place'|trans }}</label>
                           		{% if notice.locationArrange %}                        		
                            		<input type="text" value="" id="location_gapi" placeholder="{{ 'regularuser.enter_location'|trans }}"/>
                            	{% else %}
                            		<input type="text" value="{% if location %}{{location.location}}{% endif %}" id="location_gapi" placeholder="{{ 'regularuser.enter_location'|trans }}"/>
                            	{% endif %}
                            	<div class="clearfix"></div>                            	
	                      	</div>
	                      	<div class="checkbox" style="margin-left: -2px; margin-top: 18px;">
					{{ form_widget(form.location_arrange) }}
                                        {{ form_label(form.location_arrange) }}
                                        {{ form_errors(form.location_arrange) }}
	                        </div>
                    	</div>
                    </div>	            	
	          	{% endif %}
	          	{% set subId = type.subcategoryId %}
	            {% if subId %}
	          	<div class="clearfix"></div>
	          	<div class="createlistingdata halfleft">
	          		<h4>{{ 'notice.action'|trans|upper }}</h4>
	          		<div class="createlistingdetail">
	          			<p>{{ 'notice.what_other_person'|trans }}</p>
	          			<div class="clearfix"></div>
                                        {{ form_errors(form) }}
	          			<div class="actioncheck">
                                            {% for i in 0..5 %}
                                                {% if i==0 or (i==2 and (type.name == 'goods' or type.name=='offergoods' or type.name=='offerservice' or type.name=='offerevents')) or (i==4 and (type.name == 'offergoods' or type.name == 'goods'or type.name=='offerservice')) %}
                                                        <div class="checkbox">
                                                            
                                                            {{ form_widget(form.type['value_'~subId]['value'][i]) }}
                                                            {{ form_label(form.type['value_'~subId]['value'][i]) }}
                                                            {{ form_errors(form.type['value_'~subId]['value'][i]) }}
                                                        </div>
                                                {% endif %}
                                            {% endfor %}      
                                            
                                        </div>
                                        <div class="actioncheck">  
                                            {% for j in 0..5 %}
                                                {% if (j==1 and (type.name== 'goods' or type.name=='offergoods' or type.name=='offerservice' or type.name=='offerevents' or type.name=='service'))  or (j==3 and (type.name == 'offergoods' or type.name == 'goods' or type.name=='offerevents' or type.name=='offerservice')) or (j==5 and (type.name == 'goods' or type.name == 'offergoods')) %}
                                                    <div class="checkbox">
                                                        
                                                        {{ form_widget(form.type['value_'~subId]['value'][j]) }}
                                                        {{ form_label(form.type['value_'~subId]['value'][j]) }}
                                                        {{ form_errors(form.type['value_'~subId]['value'][j]) }}
                                                    </div>
                                                {% endif %}
                                            {% endfor %}
                                            {{ form_widget(form.type['value_'~subId]) }}
                                        </div>
	          		</div>
	          	</div>
	           	{% endif %}
	           	
	            {% if type.pieceAvailable %}
	           	 	<div class="createlistingdata halfright">
                       	<h4>{{ 'notice.price_pieces'|trans|upper }}</h4>
                        <div class="createlistingdetail">
                            <div class="price-spots">
                            {% if type == 'offergoods' %}
                            	<div class="left">
                            		<p>{{ 'notice.price'|trans|upper }}</p>
                            		<div class="clearfix"></div>
                                    <div class="price-textbox">
                                    	{{ form_row(form.price, {'label': 'listing.create.price_piece'|trans|upper }) }}
                                    </div>
                                   	{{ form_row(form.currency) }}
                                   	<div class="clearfix"></div>
                                    <div class="checkbox" style="margin-top: 0px ! important;  margin-left: -4px !important;">
					{{ form_widget(form.free) }}
                                            {{ form_label(form.free) }}
                                    </div>
                                        <div class="price-textbox">
                                        {{ form_errors(form.free) }}
                                        </div>
                            	</div>
                            {% endif %}
                            {% if type == 'goods' %}
                            	<div class="left">
                            		<p>{{ 'notice.price'|trans|upper }}</p>
                            		<div class="clearfix"></div>
                                    <div class="price-textbox">
                                    	{{ form_row(form.price, {'label': 'listing.create.price_piece'|trans|upper }) }}
                                    </div>
                                   	{{ form_row(form.currency) }}
                                   	<div class="clearfix"></div>
                                    <div class="checkbox" style="margin-top: 0px ! important;  margin-left: -4px !important;">
                                            {{ form_widget(form.free) }}
                                            {{ form_label(form.free) }}
                                            
                                    </div>
                                        <div class="price-textbox"> 
                                            {{ form_errors(form.free) }} 
                                        </div>
                            	</div>
                                <div class="right">
                                	<p>{{ 'notice.piece'|trans|upper }}</p>
                                	<div class="clearfix"></div>
                                            {{ form_row(form.pieces) }}
                                	<div class="checkbox" style="margin-top: 0px ! important;">
                                            {{ form_widget(form.one_piece) }}
                                            {{ form_label(form.one_piece) }}
                                            {{ form_errors(form.one_piece) }}
                                	</div>
                                </div>
                            {% else %}                            
                            	<div class="right">
                                	<p>{{ 'notice.piece'|trans|upper }}</p>
                                	<div class="clearfix"></div>
						{{ form_row(form.pieces) }}
                                	<div class="checkbox">
						{{ form_widget(form.one_piece) }}
                                                {{ form_label(form.one_piece) }}
                                                {{ form_errors(form.one_piece) }}
                                	</div>
                                	<div class="checkbox" style="margin-top: -15px; margin-left: -7px; -webkit-margin-start: -3px;">
                            			{{ form_widget(form.default_setting) }}
                                                {{ form_label(form.default_setting) }}
                                                {{ form_errors(form.default_setting) }}
                            		</div>                                
                                	<a href="{{ path('fenchy_regular_user_settings_payment', {'noticeId':notice.id}) }}" class="blue_button">{{ 'listing.create.learn_more'|trans|upper }}</a>
                                </div>
                           {% endif %}
                           </div>
                        </div>
                	</div>	              	                                                                      	
	         	{% endif %}
	         	
	            {% if type.spotAvailable %}
	            	<div class="createlistingdata halfright">
                       	<h4>{{ 'notice.price_spots'|trans|upper }}</h4>
                        <div class="createlistingdetail">
                            <div class="price-spots">
                            {% if type == 'offerevents' %}
                            	<div class="left">
                            		<p>{{ 'notice.price'|trans|upper }}</p>
                            		<div class="clearfix"></div>
                                    <div class="price-textbox">
                                    	{{ form_row(form.price, {'label': 'listing.create.price_spot'|trans|upper }) }}
                                    </div>
                                   	{{ form_row(form.currency) }}
                                   	<div class="clearfix"></div>
                                    <div class="checkbox" style="margin-top: 0px ! important;  margin-left: -4px !important;">
					{{ form_widget(form.free) }}
                                        {{ form_label(form.free) }}                                        
                                    </div>
                                       <div class="price-textbox">{{ form_errors(form.free) }}</div>
                            	</div>
                            {% endif %}
                            	<div class="right">
                                	<p>{{ 'notice.spot'|trans|upper }}</p>
                                	<div class="clearfix"></div>
                                	{{ form_row(form.spot) }}
                                	<div class="checkbox">
                                		{{ form_widget(form.unlimited) }}
                                                {{ form_label(form.unlimited) }}
                                                {{ form_errors(form.unlimited) }}
                                	</div>
                                	<div class="checkbox" style='margin-top: -15px; margin-left: -7px; -webkit-margin-start: -3px;'>
                            			{{ form_widget(form.default_setting) }}
                                                {{ form_label(form.default_setting) }}
                                                {{ form_errors(form.default_setting) }}
                            		</div>                                
                                	<a href="{{ path('fenchy_regular_user_settings_payment', {'noticeId':notice.id}) }}" class="blue_button">{{ 'listing.create.learn_more'|trans|upper }}</a>
                                </div>
                            </div>
                        </div>
                	</div>
	           	{% endif %}
	            {% if (type == 'offerservice' or type == 'service') and type.priceAvailable %}
	           		<div class="createlistingdata halfright">
                       	<h4>{{ 'notice.price_hours'|trans|upper }}</h4>
                        <div class="createlistingdetail">
                            <div class="price-spots">
                              	<div class="left">
                            		<p>{{ 'notice.price'|trans|upper }}</p>
                            		<div class="clearfix"></div>
                                    <div class="price-textbox">
                                    	{{ form_row(form.price, {'label': 'listing.create.price_hour'|trans|upper }) }}
                                    </div>
                                   	{{ form_row(form.currency) }}
                                   	<div class="clearfix"></div>
                                    <div class="checkbox" style="margin-top: 0px ! important;  margin-left: -4px !important;">
					{{ form_widget(form.free) }}
                                        {{ form_label(form.free) }}                                        
                                    </div>
                                        <div class="price-textbox">{{ form_errors(form.free) }}</div>
                            	</div> 
                                {% if (type != 'service') %}
                            	<div class="right">
                            		<div class="checkbox" style='margin-left: -7px; -webkit-margin-start: -3px;'>
                            			{{ form_widget(form.default_setting) }}
                                                {{ form_label(form.default_setting) }}
                                                {{ form_errors(form.default_setting) }}
                            		</div>
                            		<a href="{{ path('fenchy_regular_user_settings_payment', {'noticeId':notice.id}) }}" class="blue_button">{{ 'listing.create.learn_more'|trans|upper }}</a>
                            	</div> 
                                {% endif %}
                            </div>
                        </div>
                	</div>	               	
	         	{% endif %} 
	            {% if form.put_on_fb is defined %}
	                <div class="row grid_6">
	                 	{{ form_row(form.put_on_fb) }}
	                </div>
	             {% endif %}
	             <div class="form-type-fields-container">
	              	{{ form_widget(form.type) }}
	             </div>
	             <div class="row fieldInput noticebundle grid_2" style="display:none;">
	               {{ form_rest(form) }}
	             </div>
                        <div class="clearfix"></div>
	        	 <div class="right" style="margin-bottom: 20px;">
	            	<a id="back" class="blue_button about_edit" href="{{ path('fenchy_regular_user_listing_manage') }}" style="padding: 2.5px 18px; margin-right: 40px;">
	                	{{ 'regularuser.back'|trans|upper }}
	                </a>
	           	   	<input type="submit" class="blue_button" id="continue" value="{{ 'btn.send'|trans|upper }}"/>
	            </div>
	    	</div>
	    	<div class="clearfix"></div>
		</form>
    	<div class="bgbottom">
    		<img alt="" src="{{ absolute(asset('images/bgbottom_contantinner.png')) }}">
    	</div>
    </div>
	</section>
    
        <a id="SetPayment" href="#dialog45" class="zoomthis blue_button" name="modal" id="vzoom_1944" style="display: none;"></a>
        <section id="boxes2">
		<div id="dialog45" class="window">
	   	<div class="big_popup">
	      	<div class="big_popupclose"><a href="" class="close"></a></div>
			<div id="messageForm">
				<p>{{ 'regularuser.payment_settings'|trans }}</p>
			</div>
			<a href="javascript:void(0);" class="blue_button left" style="margin-left:20px;" onclick="$('#dialog45').hide();$('#mask').hide();">{{ 'regularuser.back'|trans }}</a>
			<a href="{{ path('fenchy_regular_user_settings_payment', {'noticeId':notice.id}) }}" class="blue_button right" style="margin-right:20px;">{{ 'regularuser.setpayment'|trans }}</a>
		</div>
		<img class="popup_bottom" src="/images/popup_bottom.png" alt="" style="width: 100%; bottom: -9px;">
		</div>
		<div id="mask"></div>
	</section>
        
        <a id="Noification" href="#dialog455" class="zoomthis blue_button" name="modal" id="vzoom_1944" style="display: none;"></a>
        <section id="boxes2">
		<div id="dialog455" class="window">
                <div id="dialog45">
	   	<div class="big_popup">
	      	<div class="big_popupclose"><a href="" class="close"></a></div>
			<div id="messageForm">
				<p style="color: red;">{{ 'regularuser.payment_settings'|trans }}</p>
			</div>
			<a href="javascript:void(0);" class="blue_button left" style="margin-left:20px;" onclick="$('#dialog45').hide();$('#mask').hide();">{{ 'regularuser.back'|trans }}</a>
			<a href="{{ path('fenchy_regular_user_settings_payment', {'noticeId':notice.id}) }}" class="blue_button right" style="margin-right:20px;">{{ 'regularuser.setpayment'|trans }}</a>
		</div>
		<img class="popup_bottom" src="/images/popup_bottom.png" alt="" style="width: 100%; bottom: -9px;">
		</div>
                </div>
		<div id="mask"></div>
	</section>
    <script type="text/javascript">
        $(document).ready(function () {
            var sampleTags = {{ tags|json_encode|raw }};
        
            createListing.step2.init();
            
            $('#fenchy_noticebundle_noticetype_tags').tagit({
                availableTags: sampleTags,
                allowSpaces: true
            });
            // For the Tag textbox width change after charactors increased
            $(".tagit-new input").bind('keydown', function () {
                    //alert('test');
                     $(this).attr("size", Math.max(10,$(this).val().length) );
            }); 
        });
        
    </script>
{% endblock %}